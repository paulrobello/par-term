#!/bin/bash
# Test script for par-term font features
# Run this inside par-term to verify font rendering

set -euo pipefail

# Colors for output
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  par-term Font Feature Test Suite                           â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Test 1: Regular ASCII
echo -e "${BLUE}Test 1: Regular ASCII Characters${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
echo "0123456789 !@#\$%^&*()_+-=[]{}|;:',.<>?/"
echo ""

# Test 2: Bold text (should use font_family_bold if configured)
echo -e "${BLUE}Test 2: Bold Text (Styled Font)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "Regular: The quick brown fox jumps over the lazy dog"
echo -e "\033[1mBold: The quick brown fox jumps over the lazy dog\033[0m"
echo -e "${YELLOW}âœ“ If configured, bold should use font_family_bold${NC}"
echo ""

# Test 3: Italic text (should use font_family_italic if configured)
echo -e "${BLUE}Test 3: Italic Text (Styled Font)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "Regular: The quick brown fox jumps over the lazy dog"
echo -e "\033[3mItalic: The quick brown fox jumps over the lazy dog\033[0m"
echo -e "${YELLOW}âœ“ If configured, italic should use font_family_italic${NC}"
echo ""

# Test 4: Bold+Italic (should use font_family_bold_italic if configured)
echo -e "${BLUE}Test 4: Bold+Italic Text (Styled Font)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "Regular: The quick brown fox jumps over the lazy dog"
echo -e "\033[1;3mBold+Italic: The quick brown fox jumps over the lazy dog\033[0m"
echo -e "${YELLOW}âœ“ If configured, should use font_family_bold_italic${NC}"
echo ""

# Test 5: CJK Characters (should use font_ranges if configured)
echo -e "${BLUE}Test 5: CJK Characters (Font Ranges)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Chinese (Simplified): ä½ å¥½ä¸–ç•Œ (NÇ hÇo shÃ¬jiÃ¨)"
echo "Chinese (Traditional): ä½ å¥½ä¸–ç•Œ"
echo "Japanese Hiragana: ã“ã‚“ã«ã¡ã¯ä¸–ç•Œ (Konnichiwa sekai)"
echo "Japanese Katakana: ã‚³ãƒ³ãƒ‹ãƒãƒ ã‚»ã‚«ã‚¤"
echo "Korean: ì•ˆë…•í•˜ì„¸ìš” ì„¸ê³„ (Annyeonghaseyo segye)"
echo -e "${YELLOW}âœ“ CJK should use font_ranges[0x4E00-0x9FFF] if configured${NC}"
echo ""

# Test 6: Emoji (should use font_ranges if configured)
echo -e "${BLUE}Test 6: Emoji (Font Ranges)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Faces: ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜Š ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜ ğŸ¥°"
echo "Symbols: ğŸš€ â­ ğŸŒŸ ğŸ”¥ ğŸ’» ğŸ“± âš¡ ğŸ‰ â¤ï¸ ğŸ‘"
echo "Animals: ğŸ¶ ğŸ± ğŸ­ ğŸ¹ ğŸ° ğŸ¦Š ğŸ» ğŸ¼ ğŸ¨ ğŸ¯"
echo "Food: ğŸ ğŸŠ ğŸ‹ ğŸŒ ğŸ‰ ğŸ‡ ğŸ“ ğŸˆ ğŸ’ ğŸ‘"
echo -e "${YELLOW}âœ“ Emoji should use font_ranges[0x1F600-0x1F64F] if configured${NC}"
echo ""

# Test 7: Flags (Regional Indicator Multi-Part Rendering)
echo -e "${BLUE}Test 7: Flags (Regional Indicators - Text Shaping)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Country Flags: ğŸ‡ºğŸ‡¸ ğŸ‡¬ğŸ‡§ ğŸ‡¯ğŸ‡µ ğŸ‡©ğŸ‡ª ğŸ‡«ğŸ‡· ğŸ‡¨ğŸ‡¦ ğŸ‡¦ğŸ‡º ğŸ‡§ğŸ‡· ğŸ‡®ğŸ‡³ ğŸ‡¨ğŸ‡³"
echo "More Flags: ğŸ‡°ğŸ‡· ğŸ‡®ğŸ‡¹ ğŸ‡ªğŸ‡¸ ğŸ‡·ğŸ‡º ğŸ‡²ğŸ‡½ ğŸ‡³ğŸ‡± ğŸ‡¸ğŸ‡ª ğŸ‡¨ğŸ‡­ ğŸ‡µğŸ‡± ğŸ‡¹ğŸ‡·"
echo "Flag Examples:"
echo "  ğŸ‡ºğŸ‡¸ United States (U+1F1FA + U+1F1F8)"
echo "  ğŸ‡¬ğŸ‡§ United Kingdom (U+1F1EC + U+1F1E7)"
echo "  ğŸ‡¯ğŸ‡µ Japan (U+1F1EF + U+1F1F5)"
echo -e "${YELLOW}âœ“ Flags use Regional Indicator pairs (U+1F1E6-U+1F1FF)${NC}"
echo -e "${YELLOW}âœ“ Tests multi-codepoint grapheme cluster rendering${NC}"
echo -e "${GREEN}âœ“ Text shaping enabled - flags should render correctly!${NC}"
echo ""

# Test 8: Mathematical Symbols (should use font_ranges if configured)
echo -e "${BLUE}Test 8: Mathematical Symbols (Font Ranges)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Operators: + âˆ’ Ã— Ã· = â‰  â‰ˆ â‰¤ â‰¥ Â± âˆ“"
echo "Set Theory: âˆˆ âˆ‰ âˆ‹ âˆŒ âŠ‚ âŠƒ âŠ† âŠ‡ âˆ© âˆª âˆ…"
echo "Logic: âˆ€ âˆƒ âˆ„ âˆ§ âˆ¨ Â¬ âŠ¤ âŠ¥"
echo "Calculus: âˆ« âˆ¬ âˆ­ âˆ® âˆ‚ âˆ‡ âˆ† âˆš âˆ› âˆœ"
echo "Examples:"
echo "  âˆ€xâˆˆâ„: xÂ²â‰¥0"
echo "  âˆ«â‚€^âˆ e^(-xÂ²)dx = âˆšÏ€/2"
echo "  âˆ‘áµ¢â‚Œâ‚^n i = n(n+1)/2"
echo -e "${YELLOW}âœ“ Math should use font_ranges[0x2200-0x22FF] if configured${NC}"
echo ""

# Test 9: Box Drawing (should use font_ranges if configured)
echo -e "${BLUE}Test 9: Box Drawing (Font Ranges)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Simple box:"
echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "â”‚  Hello  â”‚"
echo "â”‚  World  â”‚"
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "Complex grid:"
echo "â”Œâ”€â”¬â”€â”¬â”€â”"
echo "â”‚ â”‚ â”‚ â”‚"
echo "â”œâ”€â”¼â”€â”¼â”€â”¤"
echo "â”‚ â”‚ â”‚ â”‚"
echo "â”œâ”€â”¼â”€â”¼â”€â”¤"
echo "â”‚ â”‚ â”‚ â”‚"
echo "â””â”€â”´â”€â”´â”€â”˜"
echo ""
echo "Block elements: â–€ â–„ â–ˆ â–Œ â– â–‘ â–’ â–“"
echo -e "${YELLOW}âœ“ Box drawing should use font_ranges[0x2500-0x257F]${NC}"
echo ""

# Test 10: Arrows and Symbols
echo -e "${BLUE}Test 10: Arrows and Symbols${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Arrows: â† â†’ â†‘ â†“ â†” â†• â‡ â‡’ â‡‘ â‡“ â‡”"
echo "Checkmarks: âœ“ âœ” âœ— âœ˜ â˜‘ â˜’"
echo "Stars: â˜… â˜† âœ¦ âœ§ â­ ğŸŒŸ"
echo "Card suits: â™  â™£ â™¥ â™¦"
echo "Music: â™© â™ª â™« â™¬ â™­ â™® â™¯"
echo ""

# Test 11: OSC 8 Hyperlinks
echo -e "${BLUE}Test 11: OSC 8 Hyperlinks${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Regular URLs (regex detection):"
echo "  https://github.com/paulrobello/par-term"
echo "  http://example.com"
echo ""
echo "OSC 8 Hyperlinks (hover and Ctrl+Click):"
printf "  Visit "
printf "\e]8;;https://github.com/paulrobello/par-term\e\\GitHub Repository\e]8;;\e\\"
printf " for more info\n"
printf "  Check out "
printf "\e]8;;https://www.rust-lang.org\e\\Rust Lang\e]8;;\e\\"
printf " official site\n"
echo -e "${YELLOW}âœ“ Both URL types should be clickable with Ctrl+Click${NC}"
echo ""

# Test 12: Mixed Content
echo -e "${BLUE}Test 12: Mixed Content (All Features)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "\033[1mBold:\033[0m The number Ï€ â‰ˆ 3.14159..."
echo -e "\033[3mItalic:\033[0m ä¸–ç•Œ means 'world' ğŸŒ"
echo -e "\033[1;3mBold+Italic:\033[0m âˆ«âˆ«âˆ« Triple integral ğŸ“"
echo ""
echo "Mixed line: Regular ä½ å¥½ Bold ğŸ˜€ Math âˆ‘áµ¢â‚Œâ‚^n Box â”Œâ”€â”"
echo ""

# Test 13: Emoji Skin Tones (Text Shaping - Multi-codepoint Graphemes)
echo -e "${BLUE}Test 13: Emoji Skin Tones (Fitzpatrick Modifiers)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Waving Hand:"
echo "  ğŸ‘‹ Default (no modifier)"
echo "  ğŸ‘‹ğŸ» Light skin tone (U+1F3FB)"
echo "  ğŸ‘‹ğŸ¼ Medium-light skin tone (U+1F3FC)"
echo "  ğŸ‘‹ğŸ½ Medium skin tone (U+1F3FD)"
echo "  ğŸ‘‹ğŸ¾ Medium-dark skin tone (U+1F3FE)"
echo "  ğŸ‘‹ğŸ¿ Dark skin tone (U+1F3FF)"
echo ""
echo "Thumbs Up:"
echo "  ğŸ‘ ğŸ‘ğŸ» ğŸ‘ğŸ¼ ğŸ‘ğŸ½ ğŸ‘ğŸ¾ ğŸ‘ğŸ¿"
echo ""
echo "Raised Fist:"
echo "  âœŠ âœŠğŸ» âœŠğŸ¼ âœŠğŸ½ âœŠğŸ¾ âœŠğŸ¿"
echo ""
echo "Person Gestures:"
echo "  ğŸ™‹ ğŸ™‹ğŸ» ğŸ™‹ğŸ¼ ğŸ™‹ğŸ½ ğŸ™‹ğŸ¾ ğŸ™‹ğŸ¿"
echo "  ğŸ’ ğŸ’ğŸ» ğŸ’ğŸ¼ ğŸ’ğŸ½ ğŸ’ğŸ¾ ğŸ’ğŸ¿"
echo -e "${YELLOW}âœ“ Tests grapheme cluster caching with skin tone modifiers${NC}"
echo -e "${GREEN}âœ“ All skin tones should render with correct colors!${NC}"
echo ""

# Test 14: ZWJ Sequences (Zero-Width Joiner)
echo -e "${BLUE}Test 14: ZWJ Sequences (Complex Emoji)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Family Emoji (ZWJ sequences):"
echo "  ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family: man, woman, girl, boy"
echo "  ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family: man, woman, girl"
echo "  ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ Family: man, man, girl, boy"
echo "  ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ Family: woman, woman, girl, girl"
echo ""
echo "Profession Emoji (ZWJ with modifiers):"
echo "  ğŸ‘¨â€âš•ï¸ Man health worker"
echo "  ğŸ‘©â€âš•ï¸ Woman health worker"
echo "  ğŸ‘¨â€ğŸ’» Man technologist"
echo "  ğŸ‘©â€ğŸ’» Woman technologist"
echo "  ğŸ‘¨â€ğŸš€ Man astronaut"
echo "  ğŸ‘©â€ğŸš€ Woman astronaut"
echo ""
echo "Multi-component Emoji:"
echo "  ğŸ‘ï¸â€ğŸ—¨ï¸ Eye in speech bubble"
echo "  ğŸ´â€â˜ ï¸ Pirate flag"
echo "  ğŸ»â€â„ï¸ Polar bear"
echo "  ğŸ‘¨ğŸ½â€ğŸ’» Man technologist: medium skin tone"
echo "  ğŸ‘©ğŸ¾â€ğŸš€ Woman astronaut: medium-dark skin tone"
echo -e "${YELLOW}âœ“ Tests complex ZWJ sequences with skin tones${NC}"
echo -e "${GREEN}âœ“ Text shaping should combine all components correctly!${NC}"
echo ""

# Test 15: Complex Scripts (Requires Text Shaping)
echo -e "${BLUE}Test 15: Complex Scripts (Arabic, Devanagari, Thai)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Arabic (Right-to-Left, Contextual Shaping):"
echo "  Ù…Ø±Ø­Ø¨Ø§ (marhaba - Hello)"
echo "  Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… (as-salÄmu Ê¿alaykum - Peace be upon you)"
echo "  Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (al-Ê¿arabiyyah - Arabic)"
echo "  Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… (Welcome to the world)"
echo -e "${YELLOW}âœ“ Arabic letters should connect based on position (initial/medial/final/isolated)${NC}"
echo ""
echo "Devanagari (Complex Ligatures):"
echo "  à¤¨à¤®à¤¸à¥à¤¤à¥‡ (namaste - Hello)"
echo "  à¤§à¤¨à¥à¤¯à¤µà¤¾à¤¦ (dhanyavÄd - Thank you)"
echo "  à¤¸à¥à¤µà¤¾à¤—à¤¤ (svÄgat - Welcome)"
echo "  à¤¦à¥‡à¤µà¤¨à¤¾à¤—à¤°à¥€ (devanÄgarÄ« - Devanagari script)"
echo -e "${YELLOW}âœ“ Devanagari consonant clusters should form ligatures${NC}"
echo ""
echo "Thai (Non-spacing Marks):"
echo "  à¸ªà¸§à¸±à¸ªà¸”à¸µ (sawatdii - Hello)"
echo "  à¸‚à¸­à¸šà¸„à¸¸à¸“ (khop khun - Thank you)"
echo "  à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ (phasa thai - Thai language)"
echo "  à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸š (yin dii ton rap - Welcome)"
echo -e "${YELLOW}âœ“ Thai vowels and tone marks should position correctly${NC}"
echo ""
echo "Bengali (Complex Shaping):"
echo "  à¦¹à§à¦¯à¦¾à¦²à§‹ (hyalo - Hello)"
echo "  à¦§à¦¨à§à¦¯à¦¬à¦¾à¦¦ (dhÃ´nnÃ´bad - Thank you)"
echo "  à¦¬à¦¾à¦‚à¦²à¦¾ (bangla - Bengali)"
echo ""
echo "Tamil (Complex Ligatures):"
echo "  à®µà®£à®•à¯à®•à®®à¯ (vanakkam - Hello)"
echo "  à®¨à®©à¯à®±à®¿ (nanri - Thank you)"
echo "  à®¤à®®à®¿à®´à¯ (tamil - Tamil)"
echo -e "${GREEN}âœ“ Text shaping should handle all script features correctly!${NC}"
echo ""

# Test 16: Bidirectional Text (BiDi)
echo -e "${BLUE}Test 16: Bidirectional Text (LTR + RTL Mix)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "English + Arabic:"
echo "  Hello Ù…Ø±Ø­Ø¨Ø§ World"
echo "  The word Ù…Ø±Ø­Ø¨Ø§ means hello"
echo "  Welcome to Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ (Arab world)"
echo ""
echo "English + Hebrew:"
echo "  Hello ×©×œ×•× World"
echo "  Peace: ×©×œ×•× and Ø³Ù„Ø§Ù…"
echo "  Mixed text: English ×©Ö¸××œ×•Ö¹× Ø¹ÙØ±ÙØ¨ÙÙŠÙ‘ 123 numbers"
echo ""
echo "LTR with embedded RTL:"
echo "  She said \"Ù…Ø±Ø­Ø¨Ø§\" to me"
echo "  The file is named \"×©×œ×•×.txt\""
echo ""
echo "Complex BiDi (nested):"
echo "  English (Arabic Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Hebrew ×¢×‘×¨×™×ª) English"
echo -e "${YELLOW}âœ“ BiDi algorithm should reorder text correctly${NC}"
echo -e "${GREEN}âœ“ Text shaping with unicode-bidi integration!${NC}"
echo ""

# Test 17: Combining Diacritics
echo -e "${BLUE}Test 17: Combining Diacritics${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Latin diacritics (precomposed):"
echo "  Ã¡ Ã© Ã­ Ã³ Ãº Ã  Ã¨ Ã¬ Ã² Ã¹ Ã¢ Ãª Ã® Ã´ Ã» Ã£ Ãµ Ã±"
echo "  Ã¤ Ã« Ã¯ Ã¶ Ã¼ Ã¿ Ã§ Ã Ã‰ Ã Ã“ Ãš Ã€ Ãˆ ÃŒ Ã’ Ã™"
echo ""
echo "Latin diacritics (combining characters):"
echo "  a\u0301 e\u0301 i\u0301 o\u0301 u\u0301 (acute: U+0301)"
echo "  a\u0300 e\u0300 i\u0300 o\u0300 u\u0300 (grave: U+0300)"
echo "  a\u0302 e\u0302 i\u0302 o\u0302 u\u0302 (circumflex: U+0302)"
echo "  a\u0303 e\u0303 i\u0303 o\u0303 u\u0303 (tilde: U+0303)"
echo "  a\u0308 e\u0308 i\u0308 o\u0308 u\u0308 (diaeresis: U+0308)"
echo ""
echo "Multiple combining marks:"
echo "  o\u0308\u0304 (o with diaeresis and macron)"
echo "  u\u0301\u0303 (u with acute and tilde)"
echo "  e\u0302\u0301 (e with circumflex and acute)"
echo ""
echo "Vietnamese (complex diacritics):"
echo "  Tiáº¿ng Viá»‡t (Vietnamese language)"
echo "  Xin chÃ o (Hello)"
echo "  Cáº£m Æ¡n (Thank you)"
echo ""
echo "IPA (International Phonetic Alphabet):"
echo "  [ËˆhÉ›loÊŠ] (hello)"
echo "  [É™ËˆbaÊŠt] (about)"
echo "  [ÉªnËŒtÉšËˆnÃ¦ÊƒÉ™nÉ™l] (international)"
echo -e "${YELLOW}âœ“ Combining marks should overlay correctly on base characters${NC}"
echo -e "${GREEN}âœ“ Text shaping handles multi-mark compositions!${NC}"
echo ""

# Test 18: Programming Ligatures
echo -e "${BLUE}Test 18: Programming Ligatures${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Arrow operators:"
echo "  -> => --> ==> >>= <<="
echo "  <- <-- <== <<- >>- ->> <->"
echo ""
echo "Comparison operators:"
echo "  == != === !== <= >= <=> <=>"
echo "  =/= =!= <> /= !=="
echo ""
echo "Logical operators:"
echo "  && || !! &&&"
echo ""
echo "Pipe operators:"
echo "  |> <| ||> <|| ||| |||>"
echo ""
echo "Other operators:"
echo "  ++ +++ -- :: ::: .= !~ ~= ~- ~@"
echo "  *> <* <*> <$ $> <$> <!-- -->"
echo ""
echo "Code examples:"
echo "  const add = (a, b) => a + b;"
echo "  fn process() -> Result<(), Error> {"
echo "  if x >= 0 && y <= 100 {"
echo "  data |> filter |> map |> reduce"
echo -e "${YELLOW}âš  NOTE: Programming ligatures may not display in terminal context${NC}"
echo -e "${YELLOW}  Terminal cell width constraints prevent multi-char ligatures${NC}"
echo -e "${YELLOW}  This is a known limitation - future enhancement${NC}"
echo -e "${GREEN}âœ“ OpenType liga/clig features are activated in text shaping!${NC}"
echo ""

# Test 19: Wide Character Rendering
echo -e "${BLUE}Test 19: Wide Character Rendering${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "CJK characters (2 cells wide):"
echo "  ä¸­æ–‡å­—ä½“ (Chinese characters)"
echo "  æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆ (Japanese mixed)"
echo "  í•œêµ­ì–´ ê¸€ê¼´ (Korean characters)"
echo ""
echo "Emoji (2 cells wide):"
echo "  ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜Š"
echo "  ğŸš€â­ğŸŒŸğŸ”¥ğŸ’»"
echo ""
echo "Mixed width test:"
echo "  ABCä¸­æ–‡123æ—¥æœ¬èª456í•œêµ­ì–´789"
echo "  ağŸ˜€bğŸ˜ƒcğŸ˜„dğŸ˜eğŸ˜Šf"
echo ""
echo "Alignment test (should line up):"
echo "  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”"
echo "  â”‚ A  â”‚ ä¸­ â”‚ ğŸ˜€ â”‚"
echo "  â”‚ BC â”‚ æ–‡ â”‚ ğŸš€ â”‚"
echo "  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜"
echo -e "${YELLOW}âœ“ Wide characters should occupy 2 cells${NC}"
echo -e "${YELLOW}âœ“ Tests glyph advances from text shaping${NC}"
echo -e "${GREEN}âœ“ Box alignment verifies correct cell width handling!${NC}"
echo ""

# Test 20: Variation Selectors
echo -e "${BLUE}Test 20: Variation Selectors (Text vs Emoji Style)${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Default rendering:"
echo "  â˜º â˜¹ â™  â™£ â™¥ â™¦ â˜€ â˜… â˜‚"
echo ""
echo "Text style (U+FE0E):"
echo "  â˜ºï¸ â˜¹ï¸ â™ ï¸ â™£ï¸ â™¥ï¸ â™¦ï¸ â˜€ï¸ â˜…ï¸ â˜‚ï¸"
echo ""
echo "Emoji style (U+FE0F):"
echo "  â˜ºï¸ â˜¹ï¸ â™ ï¸ â™£ï¸ â™¥ï¸ â™¦ï¸ â˜€ï¸ â˜…ï¸ â˜‚ï¸"
echo ""
echo "More examples:"
echo "  Â©ï¸ (text) vs Â©ï¸ (emoji)"
echo "  Â®ï¸ (text) vs Â®ï¸ (emoji)"
echo "  âœ‚ï¸ (text) vs âœ‚ï¸ (emoji)"
echo -e "${YELLOW}âœ“ Variation selectors control text vs emoji rendering${NC}"
echo -e "${GREEN}âœ“ Text shaping respects variation selectors!${NC}"
echo ""

# Test 21: Performance Test
echo -e "${BLUE}Test 21: Performance Test${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "Rendering many different glyphs..."
for i in {1..10}; do
    echo "Line $i: ABC ä½ å¥½ ğŸ˜€ğŸ‘ğŸ½ âˆ€xâˆˆâ„ â”Œâ”€â” Ù…Ø±Ø­Ø¨Ø§ à¤¨à¤®à¤¸à¥à¤¤à¥‡ -> => fi fl"
done
echo -e "${YELLOW}âœ“ Should render smoothly without lag${NC}"
echo -e "${YELLOW}âœ“ Tests shaped glyph caching performance${NC}"
echo ""

# Summary
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  Test Suite Complete                                         â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo -e "${GREEN}âœ“ All 21 comprehensive tests completed!${NC}"
echo ""
echo "Text Shaping Features Tested:"
echo "  âœ“ Basic font features (regular, bold, italic, bold+italic)"
echo "  âœ“ CJK characters and font ranges"
echo "  âœ“ Emoji with skin tone modifiers (Fitzpatrick)"
echo "  âœ“ Flag emoji (Regional Indicator pairs)"
echo "  âœ“ ZWJ sequences (family, profession, complex emoji)"
echo "  âœ“ Complex scripts (Arabic, Devanagari, Thai, Bengali, Tamil)"
echo "  âœ“ Bidirectional text (LTR + RTL mix)"
echo "  âœ“ Combining diacritics (precomposed and combining characters)"
echo "  âœ“ Programming ligatures (liga, clig features)"
echo "  âœ“ Wide character rendering (CJK, emoji cell width)"
echo "  âœ“ Variation selectors (text vs emoji style)"
echo "  âœ“ Performance with shaped glyph caching"
echo ""
echo "Verification Checklist:"
echo "  1. Styled fonts: Bold/italic should use configured font families"
echo "  2. Emoji skin tones: Should render with correct colors (ğŸ‘ğŸ»-ğŸ‘ğŸ¿)"
echo "  3. Flag emoji: Should combine into flags (ğŸ‡ºğŸ‡¸ ğŸ‡¬ğŸ‡§ ğŸ‡¯ğŸ‡µ)"
echo "  4. Complex emoji: ZWJ sequences should form single glyphs (ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦)"
echo "  5. Arabic/RTL: Letters should connect contextually"
echo "  6. Devanagari/Thai: Complex ligatures should form"
echo "  7. BiDi text: Mixed LTR/RTL should reorder correctly"
echo "  8. Diacritics: Combining marks should overlay properly"
echo "  9. Wide chars: CJK/emoji should occupy 2 cells"
echo "  10. Performance: Should render smoothly without lag"
echo ""
echo "Configuration:"
echo "  Config file: ~/.config/par-term/config.yaml"
echo "  Text shaping: enable_text_shaping: true (default)"
echo "  Ligatures: enable_ligatures: true (default)"
echo "  Kerning: enable_kerning: true (default)"
echo ""
echo "See examples/ directory for configuration templates"
echo ""
